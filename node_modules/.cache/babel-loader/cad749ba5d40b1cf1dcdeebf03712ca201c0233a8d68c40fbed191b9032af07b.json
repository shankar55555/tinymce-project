{"ast":null,"code":"/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { ScriptLoader } from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { initEditor, isTextarea, mergePlugins, uuid, isNullOrUndefined } from '../Utils';\nimport { editorProps } from './EditorPropTypes';\nvar renderInline = function (h, id, tagName) {\n  return h(tagName ? tagName : 'div', {\n    attrs: {\n      id: id\n    }\n  });\n};\nvar renderIframe = function (h, id) {\n  return h('textarea', {\n    attrs: {\n      id: id\n    },\n    style: {\n      visibility: 'hidden'\n    }\n  });\n};\nvar initialise = function (ctx) {\n  return function () {\n    var finalInit = __assign(__assign({}, ctx.$props.init), {\n      readonly: ctx.$props.disabled,\n      selector: \"#\" + ctx.elementId,\n      plugins: mergePlugins(ctx.$props.init && ctx.$props.init.plugins, ctx.$props.plugins),\n      toolbar: ctx.$props.toolbar || ctx.$props.init && ctx.$props.init.toolbar,\n      inline: ctx.inlineEditor,\n      setup: function (editor) {\n        ctx.editor = editor;\n        editor.on('init', function (e) {\n          return initEditor(e, ctx, editor);\n        });\n        if (ctx.$props.init && typeof ctx.$props.init.setup === 'function') {\n          ctx.$props.init.setup(editor);\n        }\n      }\n    });\n    if (isTextarea(ctx.element)) {\n      ctx.element.style.visibility = '';\n      ctx.element.style.display = '';\n    }\n    getTinymce().init(finalInit);\n  };\n};\nexport var Editor = {\n  props: editorProps,\n  created: function () {\n    this.elementId = this.$props.id || uuid('tiny-vue');\n    this.inlineEditor = this.$props.init && this.$props.init.inline || this.$props.inline;\n    this.initialized = false;\n  },\n  watch: {\n    disabled: function () {\n      this.editor.setMode(this.disabled ? 'readonly' : 'design');\n    }\n  },\n  mounted: function () {\n    this.element = this.$el;\n    if (getTinymce() !== null) {\n      initialise(this)();\n    } else if (this.element && this.element.ownerDocument) {\n      var channel = this.$props.cloudChannel ? this.$props.cloudChannel : '5';\n      var apiKey = this.$props.apiKey ? this.$props.apiKey : 'no-api-key';\n      var scriptSrc = isNullOrUndefined(this.$props.tinymceScriptSrc) ? \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\" : this.$props.tinymceScriptSrc;\n      ScriptLoader.load(this.element.ownerDocument, scriptSrc, initialise(this));\n    }\n  },\n  beforeDestroy: function () {\n    if (getTinymce() !== null) {\n      getTinymce().remove(this.editor);\n    }\n  },\n  deactivated: function () {\n    var _a;\n    if (!this.inlineEditor) {\n      this.cache = this.editor.getContent();\n      (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(this.editor);\n    }\n  },\n  activated: function () {\n    if (!this.inlineEditor && this.initialized) {\n      initialise(this)();\n    }\n  },\n  render: function (h) {\n    return this.inlineEditor ? renderInline(h, this.elementId, this.$props.tagName) : renderIframe(h, this.elementId);\n  }\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","ScriptLoader","getTinymce","initEditor","isTextarea","mergePlugins","uuid","isNullOrUndefined","editorProps","renderInline","h","id","tagName","attrs","renderIframe","style","visibility","initialise","ctx","finalInit","$props","init","readonly","disabled","selector","elementId","plugins","toolbar","inline","inlineEditor","setup","editor","on","e","element","display","Editor","props","created","initialized","watch","setMode","mounted","$el","ownerDocument","channel","cloudChannel","apiKey","scriptSrc","tinymceScriptSrc","load","beforeDestroy","remove","deactivated","_a","cache","getContent","activated","render"],"sources":["/home/ecs/vue-tiny/tinymce-project/node_modules/@tinymce/tinymce-vue/lib/es2015/main/ts/components/Editor.js"],"sourcesContent":["/**\n * Copyright (c) 2018-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ScriptLoader } from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { initEditor, isTextarea, mergePlugins, uuid, isNullOrUndefined } from '../Utils';\nimport { editorProps } from './EditorPropTypes';\nvar renderInline = function (h, id, tagName) {\n    return h(tagName ? tagName : 'div', {\n        attrs: { id: id }\n    });\n};\nvar renderIframe = function (h, id) {\n    return h('textarea', {\n        attrs: { id: id },\n        style: { visibility: 'hidden' }\n    });\n};\nvar initialise = function (ctx) { return function () {\n    var finalInit = __assign(__assign({}, ctx.$props.init), { readonly: ctx.$props.disabled, selector: \"#\" + ctx.elementId, plugins: mergePlugins(ctx.$props.init && ctx.$props.init.plugins, ctx.$props.plugins), toolbar: ctx.$props.toolbar || (ctx.$props.init && ctx.$props.init.toolbar), inline: ctx.inlineEditor, setup: function (editor) {\n            ctx.editor = editor;\n            editor.on('init', function (e) { return initEditor(e, ctx, editor); });\n            if (ctx.$props.init && typeof ctx.$props.init.setup === 'function') {\n                ctx.$props.init.setup(editor);\n            }\n        } });\n    if (isTextarea(ctx.element)) {\n        ctx.element.style.visibility = '';\n        ctx.element.style.display = '';\n    }\n    getTinymce().init(finalInit);\n}; };\nexport var Editor = {\n    props: editorProps,\n    created: function () {\n        this.elementId = this.$props.id || uuid('tiny-vue');\n        this.inlineEditor = (this.$props.init && this.$props.init.inline) || this.$props.inline;\n        this.initialized = false;\n    },\n    watch: {\n        disabled: function () {\n            this.editor.setMode(this.disabled ? 'readonly' : 'design');\n        }\n    },\n    mounted: function () {\n        this.element = this.$el;\n        if (getTinymce() !== null) {\n            initialise(this)();\n        }\n        else if (this.element && this.element.ownerDocument) {\n            var channel = this.$props.cloudChannel ? this.$props.cloudChannel : '5';\n            var apiKey = this.$props.apiKey ? this.$props.apiKey : 'no-api-key';\n            var scriptSrc = isNullOrUndefined(this.$props.tinymceScriptSrc) ?\n                \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\" :\n                this.$props.tinymceScriptSrc;\n            ScriptLoader.load(this.element.ownerDocument, scriptSrc, initialise(this));\n        }\n    },\n    beforeDestroy: function () {\n        if (getTinymce() !== null) {\n            getTinymce().remove(this.editor);\n        }\n    },\n    deactivated: function () {\n        var _a;\n        if (!this.inlineEditor) {\n            this.cache = this.editor.getContent();\n            (_a = getTinymce()) === null || _a === void 0 ? void 0 : _a.remove(this.editor);\n        }\n    },\n    activated: function () {\n        if (!this.inlineEditor && this.initialized) {\n            initialise(this)();\n        }\n    },\n    render: function (h) {\n        return this.inlineEditor ? renderInline(h, this.elementId, this.$props.tagName) : renderIframe(h, this.elementId);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}